<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Create a styled cross table body — createStyledCrossTableBody • styledTables</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />
<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Create a styled cross table body — createStyledCrossTableBody" />

<meta property="og:description" content="This function creates the styled cross table body from a given data.frame.
This function works best in combination with the method 'createStyledCrossTableHeader'.
For the the creation of the styled cross table body the columns specified in 'subTableCols' are used to separate the
table body into several sub tables, where each sub table has the current
value in the column defined by 'subTableCols' as sub heading.
The columns specified in 'yCols', 'xCols' and 'valueCols'
will be used for the cross table calculation.
If the table should not be a cross table, but a normal table then the
arguments 'xCols' and 'valueCols should be omitted." />

<meta property="og:image" content="/logo.png" />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">styledTables</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.4.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/styledTables.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/R-package/styledTables">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Create a styled cross table body</h1>
    <small class="dont-index">Source: <a href='https://github.com/R-package/styledTables/blob/master/R/createStyledCrossTableBody.R'><code>R/createStyledCrossTableBody.R</code></a></small>
    <div class="hidden name"><code>createStyledCrossTableBody-methods.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>This function creates the styled cross table body from a given data.frame.
This function works best in combination with the method 'createStyledCrossTableHeader'.
For the the creation of the styled cross table body the columns specified in 'subTableCols' are used to separate the
table body into several sub tables, where each sub table has the current
value in the column defined by 'subTableCols' as sub heading.
The columns specified in 'yCols', 'xCols' and 'valueCols'
will be used for the cross table calculation.
If the table should not be a cross table, but a normal table then the
arguments 'xCols' and 'valueCols should be omitted.</p>
    
    </div>

    <pre class="usage"><span class='fu'>createStyledCrossTableBody</span>(<span class='no'>data</span>, <span class='no'>...</span>)

<span class='co'># S4 method for data.frame</span>
<span class='fu'>createStyledCrossTableBody</span>(<span class='no'>data</span>,
  <span class='kw'>subTableCols</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>subHeadingStylings</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>bodyStyling</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='no'>yCols</span>, <span class='kw'>yColsRight</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>xCols</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>valueCols</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>valueColStylings</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>dropMissingRows</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>dropMissingCols</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>fun.aggregate</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>fillValues</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data</th>
      <td><p>A data.frame that should be used for the creation of the cross table.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Various arguments</p></td>
    </tr>
    <tr>
      <th>subTableCols</th>
      <td><p>(optional) A vector of column names that should be used in order to separate the data.frame into several sub tables, that will be concatenated vertically. Each sub table will have a sub heading row above the sub table body. The sub heading text is just the corresponding value in the column defined by 'subTableCols'. If no sub heading should be introduced at all, the argument 'subTableCols' should be omitted. If the 'subTableCols' is vector with more than one column name, then a hirachy level is introduced for the sub headings, where the first column has the highest and the column given by the last entry in 'subTableCols' has the lowest hirachy level.</p></td>
    </tr>
    <tr>
      <th>subHeadingStylings</th>
      <td><p>(optional) A list of styling functions. A styling function is a function that takes a styled table as its only argument and returns a styled function. The first styling function is applied to the level-1 sub heading (the sub heading defined by the first entry in 'subTableCols'), the second styling function is applied to the level-2 sub heading etc. Alternatively a single styling function can be passed into 'subHeadingStylings', in this case this styling function is applied to all sub heading levels.</p></td>
    </tr>
    <tr>
      <th>bodyStyling</th>
      <td><p>(optional) A styling function that is applied to the generated styled body of each sub table. A styling function is a function that takes a styled table as its only argument and returns a styled function. In order to format the value columns of the resulting cross table use the argument 'valueColStylings'.</p></td>
    </tr>
    <tr>
      <th>yCols</th>
      <td><p>A vector of column names that are unchanged by the cross table compuation. If the table should not be a cross table, but a normal table this argument can be omitted.</p></td>
    </tr>
    <tr>
      <th>yColsRight</th>
      <td><p>A vector of column names that are unchanged by the cross table compuation. This columns are of the same kind as the columns defined by the argument <code>yCols</code>, but aligned to the right of the generated cross table.</p></td>
    </tr>
    <tr>
      <th>xCols</th>
      <td><p>(optional) A vector of column names that are used for column name generation by the cross table compuation. If the table should not be a cross table, but a normal table this argument can be omitted.</p></td>
    </tr>
    <tr>
      <th>valueCols</th>
      <td><p>(optional) A vector of column names that are used as value columns by the cross table compuation. Normally this is just one column. If  it is a vector with several column names, then the column names of these columns introduce an extra level in the cross table column hirachy.</p></td>
    </tr>
    <tr>
      <th>valueColStylings</th>
      <td><p>(optional) A single column styling function or a list of column styling functions that has the same length as 'valueCols'. Each column styling function is applied to the corresponding value column (defined to the corresponding column defined by the 'valueCols' argument) of the resulting styled cross table. If a single column styling function is passed, then the same column styling function is applied to all value columns defined in 'valueCols'. If no value column specific styling should be applied, then the 'valueColStylings' argument should be omitted. If the resulting table should not be a cross table at all, but a normal table, then  this argument should also be omitted. A column styling function is a function of the type: function(object, cols) ..., which returns a styled table, where 'object' is a styled table and 'cols' is a numeric vector of column numbers.</p></td>
    </tr>
    <tr>
      <th>dropMissingRows</th>
      <td><p>(optional) If set to FALSE and the 'subTableCols' or 'yCols' are sparse factors then the missing factor levels introduce new rows filled filled with NAs. Otherwise no extra rows will be generated. Default value is 'TRUE'.</p></td>
    </tr>
    <tr>
      <th>dropMissingCols</th>
      <td><p>(optional) If set to FALSE and the 'xCols' are sparse factors then the missing factor levels introduce extra cross table columns filled with NA's. Otherwise no extra columns will be generated. Default value is 'FALSE'.</p></td>
    </tr>
    <tr>
      <th>fun.aggregate</th>
      <td><p>(optional) Defines the function that will be used for the cross table cell aggregation. If not defined, the default aggregation function of the 'data.table::dcast' function will be used.</p></td>
    </tr>
    <tr>
      <th>fillValues</th>
      <td><p>(optional) A list of values that is used to fill the missing values in the <code>value columns</code> in the calculated cross table. The first list value is used for the first <code>value column</code>, the second value for the second <code>value column</code>. Hence, the list given in <code>fillValues</code> should have the same length as the <code>valueCols</code> and the types of the <code>fill values</code> should be the same as the corresponding <code>value columns</code> in the <code>data</code> data.frame. If the argument is omitted, then only <code>NA</code> is filled in for the missing cross table values. Caution: If an Excel file is generated from this cross table, <code>NA</code> values will be replaced by empty strings.</p></td>
    </tr>
    </table>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>dplyr</span>)</div><div class='output co'>#&gt; <span class='message'></span>
#&gt; <span class='message'>Attaching package: ‘dplyr’</span></div><div class='output co'>#&gt; <span class='message'>The following objects are masked from ‘package:data.table’:</span>
#&gt; <span class='message'></span>
#&gt; <span class='message'>    between, first, last</span></div><div class='output co'>#&gt; <span class='message'>The following objects are masked from ‘package:stats’:</span>
#&gt; <span class='message'></span>
#&gt; <span class='message'>    filter, lag</span></div><div class='output co'>#&gt; <span class='message'>The following objects are masked from ‘package:base’:</span>
#&gt; <span class='message'></span>
#&gt; <span class='message'>    intersect, setdiff, setequal, union</span></div><div class='input'><span class='co'># prepare data set for cross table</span>
<span class='no'>studentsData</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span>(
    <span class='kw'>country</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"Germany"</span>, <span class='st'>"Austria"</span>), <span class='kw'>each</span> <span class='kw'>=</span> <span class='fl'>16</span>),
    <span class='kw'>year</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span>(<span class='st'>"2010"</span>, <span class='fl'>8</span>), <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span>(<span class='st'>"2011"</span>, <span class='fl'>8</span>)),
    <span class='kw'>subject</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span>(<span class='st'>"Mathematics"</span>, <span class='fl'>4</span>), <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span>(<span class='st'>"Statistics"</span>, <span class='fl'>4</span>)), <span class='fl'>2</span>),
    <span class='kw'>gender</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span>(<span class='st'>"Male"</span>, <span class='fl'>2</span>), <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span>(<span class='st'>"Female"</span>, <span class='fl'>2</span>)), <span class='fl'>4</span>),
    <span class='kw'>result</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/rep.html'>rep</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"positive"</span>, <span class='st'>"negative"</span>), <span class='fl'>16</span>),
    <span class='kw'>N</span> <span class='kw'>=</span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/sample.html'>sample</a></span>(<span class='fl'>1</span>:<span class='fl'>1000</span>, <span class='fl'>32</span>)
  ) <span class='kw'>%&gt;%</span>
    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span>(<span class='no'>country</span>, <span class='no'>year</span>, <span class='no'>subject</span>, <span class='no'>gender</span>) <span class='kw'>%&gt;%</span>
    <span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span>(<span class='kw'>rel</span> <span class='kw'>=</span> <span class='fl'>100</span> * <span class='no'>N</span> / <span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span>(<span class='no'>N</span>)) <span class='kw'>%&gt;%</span>
    <span class='no'>ungroup</span>
<span class='co'># setup styled header</span>
<span class='no'>sHeader</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='createStyledCrossTableHeader-methods.html'>createStyledCrossTableHeader</a></span>(
  <span class='kw'>yColHeadings</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"Year"</span>, <span class='st'>"Subject"</span>),
  <span class='kw'>crossTableHeading</span> <span class='kw'>=</span> <span class='st'>"Comparison of test results"</span>,
  <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"Male"</span>, <span class='st'>"Female"</span>),
  <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"Positive"</span>, <span class='st'>"Negative"</span>),
  <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"count"</span>, <span class='st'>"in %"</span>)
) <span class='kw'>%&gt;%</span>
  <span class='no'>formatStatHeader</span>
<span class='co'># setup styled cross table body</span>
<span class='no'>sBody</span> <span class='kw'>&lt;-</span> <span class='fu'>createStyledCrossTableBody</span>(
  <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>studentsData</span>,
  <span class='kw'>subTableCols</span> <span class='kw'>=</span> <span class='st'>"country"</span>,
  <span class='kw'>subHeadingStyling</span> <span class='kw'>=</span> <span class='kw'>function</span>(<span class='no'>object</span>) <span class='fu'><a href='setHorizontal-methods.html'>setHorizontal</a></span>(<span class='no'>object</span>, <span class='st'>"center"</span>),
  <span class='kw'>bodyStyling</span> <span class='kw'>=</span> <span class='kw'>function</span>(<span class='no'>object</span>) <span class='fu'><a href='setHorizontal-methods.html'>setHorizontal</a></span>(<span class='no'>object</span>, <span class='st'>"center"</span>),
  <span class='kw'>yCols</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"year"</span>, <span class='st'>"subject"</span>),
  <span class='kw'>xCols</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"gender"</span>, <span class='st'>"result"</span>),
  <span class='kw'>valueCols</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"N"</span>, <span class='st'>"rel"</span>),
  <span class='kw'>valueColStylings</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(
    <span class='no'>formatStatAbsolute</span>,
    <span class='no'>formatStatRelative</span>
  ),
  <span class='kw'>fillValues</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(<span class='fl'>0L</span>, <span class='fl'>0</span>)
)
<span class='co'># Concat styled header and styled body into a single styled table</span>
<span class='no'>sTabel</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='StyledTable-styledTable-method.html'>styledTable</a></span>(
  <span class='no'>sHeader</span>,
  <span class='no'>sBody</span>
)</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
            
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Adrian Maldet, Gregor de Cillia.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.9000.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

